<!DOCTYPE html>
<html>
<head>
	<title>明志科大選課小幫手</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1.0, user-scalable=0">
	<meta name="title" content="明志科大選課小幫手">
	<meta name="description" content="全校課表 | 預先排課 | 衝堂檢查 | 課程評價">
	<meta name="keywords" content="明志科技大學,全校課表,預先排課,衝堂檢查,課程評價">
	<meta name="language" content="zh-tw">
	<meta property="og:url" content="https://mcut.henrywu.tw/course">
	<meta property="og:image" content="https://mcut.henrywu.tw/res/logo.png">
	<link rel="shortcut icon" type="image/png" href="https://mcut.henrywu.tw/res/logo.png" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocas/4.0.4/tocas.min.css">
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-DZHZ6VYR7M"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-DZHZ6VYR7M');
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
	<style>
		.ts-table .ts-badge {
			margin-top: -0.25rem!important;
		}

		.ts-table .ts-button {
			display: block;
			padding: 0.1rem !important
		}

		td .time {
			display: block;
		}

		.ts-modal td .time {
			display: inline-block;
		}

		.ts-modal td .time:after {
			content: '、';
		}

		td .time:last-child:after {
			content: '';
		}
		
		#main tbody tr:hover {
			background: var(--ts-gray-75);
			cursor: pointer;
		}

		.ts-table tr.is-indicated.is-primary {
			box-shadow: 2px 0 0 var(--ts-primary-600) inset !important;
		}

		div.loading {
			display: none;
		}

		.loader {
			margin: 35vh 0;
		}

		.ts-accordion .title:before {
			display: none;
		}

		body.swal2-height-auto.swal2-height-auto {
			height: 100%!important;
		}

		@media (max-width: 768px) {
			thead {
				display: none;
			}

			tfoot td {
				width: 100%!important;
			}

			table,
			tbody,
			tfoot,
			th,
			td,
			tr {
				display: block;
			}

			#main td {
				line-height: 1.2rem !important;
			}

			#main tbody td:nth-child(1),
			#main tbody td:nth-child(2),
			#main tbody td:nth-child(4),
			#main tbody td:nth-child(5) {
				width: 50%;
				display: inline-block;
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
				height: 1.4rem;
			}

			#main td:nth-child(6) {
				display: none;
			}

			.detail-content td {
				padding: .2rem 0 !important;
			}

			td .time {
				display: inline-block;
			}

			td .time:after {
				content: '、';
			}

			#main td:nth-child(2) {
				font-weight: bold;
			}

			#main td:nth-child(4):after {
				content: " 學分";
			}

			#main td:nth-child(5):after {
				content: " 老師";
			}

			#search-box {
				display: none;
			}

			.ts-grid.is-stackable .column {
				grid-column: auto/span 8;
			}
		}
	</style>
	<script>
		$(function(){
			var link = document.createElement('link');
			link.rel = 'stylesheet';
			if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) link.href = 'https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@5/dark.min.css';
			else link.href = 'https://cdn.jsdelivr.net/npm/@sweetalert2/themes@5.0.11/default/default.min.css';
			document.head.appendChild(link);

			const params = new Proxy(new URLSearchParams(localStorage.getItem('searchQuery') || ''), {
				get: (searchParams, prop) => searchParams.get(prop),
			});
			let savedCourse = JSON.parse(localStorage.getItem('savedCourse') || '[]');
			let getTerm = localStorage.getItem('term') || '';
			if(savedCourse.length > 0) $('.savedCourse_count').text(savedCourse.length).show();
			else $('.savedCourse_count').hide();
			let viewing = '';
			let weekText = ['','(一) ','(二) ','(三) ','(四) ','(五) ','(六) ',''];
			let ctimes = ["0.5","1","2","3","4","4.5","5","6","7","8","8.5","9","10","11","12"];
			let courseData = {};
			let savedCourseTime = [];
			let schoolCourse = {};
			$.ajax({
				url: 'https://bot.mcut.edu.tw/course/list.php?term='+getTerm,
				dataType: 'json',
				success: function(res){
					$.each( res.term, function( k, v ) {
						$('#search-term').append('<option value="'+v+'">'+v+( (v.includes('-3') || v.includes('-4')) ? ' (暑修)':'' )+'</option>');
					});
					if(getTerm) $('#search-term').val(getTerm);
					select_list = {};
					$.each( res.course, function( k, v ) {
						if(!select_list[v['dept']]) select_list[v['dept']] = [];
						if(!select_list[v['dept']].includes(v['year']+v['class'])) select_list[v['dept']].push(v['year']+v['class']);
						courseData[v['id']] = v;
						tr = '<tr data-detail="'+v['id']+'" class="';
						if(savedCourse.includes(v['id'])) tr += ' is-indicated is-primary';
						tr += '">';
						tr += '<td>'+v['dept']+v['year']+v['class']+'</td>';
						tr += '<td>'+v['name']+'</td>';
						tr += '<td>';
						$.each( v['time'], function( k2, t ) {
							tr += '<span class="time">'+weekText[t[0]];
							if(t[1].split('~')[0] == t[1].split('~')[1]) tr += '第 '+t[1].split('~')[0]+' 節</span>';
							else tr += t[1]+' 節</span>';
						});
						tr += '</td>';
						if(v['type'] == '必修') _type_class = '';
						else if(v['type'] == '選修') _type_class = 'is-secondary';
						else _type_class = 'is-outlined';
						tr += '<td><span class="ts-badge is-end-spaced is-small is-dense '+_type_class+'">'+v['type']+( (v['otherinfo'] != null)?' | '+v['otherinfo'].substring(0,2):'' )+'</span>'+v['credit']+'</td>';
						tr += '<td>'+v['teacher']+'</td>';
						tr += '<td>';
						tr += '<span>' + v['comment'] + '</span>';
						tr += '</td>';
						tr += '</tr>';
						$('#main tbody').append(tr);

						if(v['dept'] == '外文組-四技(日)' && v['type'] == '必修') {
							if(v['name'].includes('生活與職場英文(') && v['year'] == 1) schoolCourse['生活與職場英文_'+v['comment'].substring(0,2)] = v['id'];
							else if(v['name'].includes('英語聽講(') && v['year'] == 2) schoolCourse['英語聽講_'+v['comment'].substring(0,2)] = v['id'];
							else if(v['name'].includes('英文實務(') && v['year'] == 2) schoolCourse['英文實務2_'+v['comment']] = v['id'];
							else if(v['name'].includes('英文實務(') && v['year'] == 4) schoolCourse['英文實務4_'+v['comment']] = v['id'];
						}
					});
					console.log(JSON.stringify(schoolCourse))
					$('#search-dept').html('<option value="">不限</option><optgroup label="全校"></optgroup><optgroup label="四技日間部"></optgroup><optgroup label="學院"></optgroup><optgroup label="碩士/碩專/博士/在職專班"></optgroup><optgroup label="進修部"></optgroup>');
					$.each(select_list, function( k, v ) {
						if(k.includes('進修部')) _s = '進修部';
						else if(k.includes('學院')) _s = '學院';
						else if(k.includes('碩') || k.includes('博') || k.includes('在職專班')) _s = '碩士/碩專/博士/在職專班';
						else if((k.includes('四技') && k.includes('系')) || k == '環實務' || k == '四技行設專班') _s = '四技日間部';
						else _s = '全校';
						$('#search-dept optgroup[label="'+_s+'"]').append('<option>'+k+'</option>');
						select_list[k] = [...select_list[k]].sort(function(a, b) {
							return ((parseInt(a)*10+['甲','乙','丙','暑','重'].indexOf(a.substring(1,2))) - (parseInt(b)*10+['甲','乙','丙','暑','重'].indexOf(b.substring(1,2))));
						})
					});
					if(params['i']) $('[data-detail='+params['i']+']').click();
					if(params['d'] && Object.keys(select_list).includes(params['d'])) $('#search-dept').val(params['d']).trigger('change');
					if(params['c']) $('#search-class').val(params['c']);
					if($('#search-class').val() === undefined|| $('#search-class').val() === null) $('#search-class').val('');
					if(params['y']) $('#search-type').val(params['y']);
					if($('#search-type').val() === undefined || $('#search-type').val() === null) $('#search-type').val('');
					if(params['n']) $('#search-course').val(params['n']);
					if(params['t']) $('#search-teacher').val(params['t']);
					$('div.loading').removeClass('loading');
					$('.loader').remove();
					if(localStorage.getItem('filterOpen') == 'true') $('#search-box').show();
					updateSearch();
					updateTimeList();
				}
			});
			$('body').on('click','.ts-close',function(){
				viewing = '';
				$('.ts-modal').removeClass('is-visible');
			})

			$('body').on('click','[data-detail]',function(){
				id = $(this).attr('data-detail');
				$('#score').attr('src','rate.html?v9&id='+id);
				$('[data-show="detail-content"]').click();
				$('.ts-modal').addClass('is-visible');
				basic_data = $('[data-detail="'+id+'"]').find('td');
				$('.ts-modal .ts-header').html(basic_data[1].innerHTML)
				if($(this).hasClass('is-negative') && !savedCourse.includes(id)) $('.ts-modal .ts-header').append('　<span class="ts-badge is-negative"><span class="ts-icon is-end-spaced is-triangle-exclamation-icon"></span>衝堂</span>');
				else $('.ts-modal .ts-header').append('　<label class="ts-chip is-dense is-small is-input is-secondary"><input type="checkbox" data-save="'+id+'" /><div class="content">儲存課程</div></label>');
				if(savedCourse.includes(id)) {
					$('[data-save]').prop("checked", true)
					$('[data-save]+.content').text('已儲存課程');
				}

				detail = '';
				detail += '<table class="ts-table is-sticked is-basic" id="detail-table"><tbody>\
				<tr><td style="width: 7rem"><b>開課序號</b></td><td>'+id+'</td></tr>\
				<tr><td><b>開課單位/班級</b></td><td>'+basic_data[0].innerHTML+'</td></tr>\
				<tr><td><b>上課時間</b></td><td>'+basic_data[2].innerHTML+'</td></tr>\
				<tr><td><b>修別/學分</b></td><td>'+basic_data[3].innerHTML+' 學分</td></tr>\
				<tr><td><b>授課老師</b></td><td>'+basic_data[4].innerHTML+'</td></tr>';
				if(basic_data[5].innerHTML != '') detail += '<tr><td><b>備註</b></td><td>'+basic_data[5].innerHTML+'</td></tr>';
				detail += '<tr class="loading"><td class="is-center-aligned" colspan="2"><br><div class="ts-header is-icon"><span class="ts-icon is-spinning is-spinner-icon"></span>正在載入更多資訊...</div><br></td></tr></tbody></table>';
				$('.ts-modal .detail-content').html(detail);

				viewing = id;
				$.ajax({
					url: 'https://bot.mcut.edu.tw/course/detail.php?id='+id,
					dataType: 'json',
					success: function(res){
						if(res.length == 3) {
							$('tr.loading').remove();
							$.each( res[0], function( k, v ) {
								$('#detail-table').append('<tr><td><b>'+v[0]+'</b></td><td>'+v[1]+'</td></tr>');
							})
							$('#detail-table').append('<tr><td><b>Office Time</b></td><td>'+res[1].join('<br>')+'</td></tr>');

							timetable = '<div class="ts-accordion" style="border-top: 1px solid var(--ts-gray-300);padding-top: 5px"><div class="title" onclick="$(this).parent().toggleClass(\'is-active\')"><b>教學進度表 (點擊展開)</b></div><div class="content"><div class="ts-box"><div class="ts-content"><table class="ts-table is-sticked is-basic is-dense" id="detail-table"><tbody>';
							$.each( res[2], function( k, v ) {
								timetable += '<tr><td style="width:6rem">'+v[0]+' '+v[1]+' <br>'+v[2]+'</td>\
								<td>'+v[3]+'<small>';
								if(v[5]) timetable += '<br>'+v[5];
								if(v[4]) timetable += '<br>作業：'+v[4];
								if(v[6]) timetable += '<br>備註：'+v[6];
								timetable += '</small></td></tr></div></div>';
							})
							timetable += '</tbody></table></div></div>';

							$('.ts-modal .detail-content').append(timetable);

						} else $('tr.loading td').html('<br><div class="ts-header is-icon"><span class="ts-icon is-circle-exclamation-icon"></span>授課老師未填寫課程資料！</div><br>');
					}
				});
				$(this).attr('data-detail');
			})

			function updateSearch() {
				$('#main tbody tr').hide();
				Object.filter = (obj, predicate) =>  Object.fromEntries(Object.entries(obj).filter(predicate));
				$.each( Object.filter(courseData,function(c,i){
					if(
						c[1]['dept'].includes($('#search-dept').val()) &&
						(c[1]['year']+c[1]['class']).includes($('#search-class').val()) && 
						(
							c[1]['type'].includes($('#search-type').val()) ||
							(c[1]['otherinfo'] || '').includes($('#search-type').val())
						) &&
						c[1]['name'].includes($('#search-course').val()) &&
						c[1]['teacher'].includes($('#search-teacher').val()) 
					) return true;
					return false;
				}), function( k, v ) {
					$('[data-detail="'+v['id']+'"]').show();
				})

				if( (!$('#search-dept').val().includes('系')&&!$('#search-dept').val().includes('環實務')&&!$('#search-dept').val().includes('行設專班')) ||
					$('#search-class').val() == '' ||
					$('#main tbody tr:visible').length == 0 ||
					(($('#search-type').val() != '必修' && $('#search-type').val() != ''))
				) $('.save_require').hide();
				else $('.save_require').show();

				if($('#main tbody tr:visible').length == 0) $('tfoot').show();
				else $('tfoot').hide();
				localStorage.setItem('searchQuery', '?d='+$('#search-dept').val()+'&c='+$('#search-class').val()+'&y='+$('#search-type').val()+'&n='+$('#search-course').val()+'&t='+$('#search-teacher').val());
			}
			
			$('body').on('change','#search-dept',function(){
				_oc = $('#search-class').val();
				_ot = $('#search-type').val();
				if(!select_list[$('#search-dept').val()]) {
					$('#search-class').val('');
					return;
				}
				$('#search-class').html('<option selected="selected" value="">不限</option>');
				$.each(select_list[$('#search-dept').val()], function( k, v ) {
					$('#search-class').append('<option>'+v+'</option>');
				});
				if(select_list[$('#search-dept').val()].includes(_oc)) $('#search-class').val(_oc);
				if($('#search-dept').val() == '通識中心四技') {
					$('#search-type').parent().parent().find('label').text('修別 / 通識類別');
					$('#search-type').html('<option value="" selected="selected">不限</option><option>必修</option><option>選修</option><option value="社會科學">- 社會科學</option><option value="自然科學">- 自然科學</option><option value="人文藝術">- 人文藝術</option><option value="語言與全球化">- 語言與全球化</option><option value="自主學習">- 自主學習</option><option>重修</option>');
				} else {
					$('#search-type').parent().parent().find('label').text('修別');
					$('#search-type').html('<option value="" selected="selected">不限</option><option>必修</option><option>選修</option><option>重修</option>');
				}
				localStorage.setItem('searchQuery', '?d='+$('#search-dept').val()+'&c='+$('#search-class').val()+'&y='+$('#search-type').val()+'&n='+$('#search-course').val()+'&t='+$('#search-teacher').val());
			});

			$('body').on('change','#search-dept, #search-class, #search-type, #search-course, #search-teacher',function(){
				updateSearch();
			});
			$('body').on('input','#search-course, #search-teacher',function(){
				updateSearch();
			});

			$('body').on('change','[data-save]',function(){
				thisid = $(this).attr('data-save');
				if(!savedCourse.includes(thisid)) {
					savedCourse.push(thisid);
					$('[data-detail="'+thisid+'"]').addClass('is-indicated is-primary');
					$(this).parent().find('.content').text('已儲存課程');
					Swal.fire({
						title: '「'+courseData[thisid]['name']+'」已儲存', icon: 'success', toast: true,
						timer: 3000, timerProgressBar: true,
						position: 'bottom-start', showConfirmButton: false,
					})
				} else {
					const index = savedCourse.indexOf(thisid);
					if (index > -1) savedCourse.splice(index, 1);
					$('[data-detail="'+thisid+'"]').removeClass('is-indicated is-primary');
					Swal.fire({
						title: '「'+courseData[thisid]['name']+'」已移除', icon: 'success', toast: true,
						timer: 3000, timerProgressBar: true,
						position: 'bottom-start', showConfirmButton: false,
					})
				}
				if(savedCourse.length > 0) $('.savedCourse_count').text(savedCourse.length).show();
				else $('.savedCourse_count').hide();
				updateTimeList();
				localStorage.setItem('savedCourse', JSON.stringify(savedCourse))
			});

			$('.toggle-search').on('click',function(){
				$('#search-box').toggle();
				localStorage.setItem('filterOpen', $('#search-box').css("display") != 'none');
			})

			$('.save_require').on('click',function(){
				Swal.fire({
					title: '是否要儲存「'+$('#search-dept').val()+$('#search-class').val()+'」的必修課程？',
					text: "先前儲存的課程將會清空！",
					icon: 'question',
					showCancelButton: true,
					confirmButtonColor: 'var(--ts-primary-600)',
					cancelButtonColor: 'var(--ts-gray-500)',
					confirmButtonText: '確定',
					cancelButtonText: '取消'
				}).then((result) => {
					if (result.isConfirmed) {
						savedCourse = [];
						$('[data-detail]').removeClass('is-indicated is-primary is-negative');
						$('#main tbody tr:visible').each(function( index ) {
							if($(this).find('td')[3].innerText.includes('必') && !savedCourse.includes($(this).attr('data-detail'))) {
								savedCourse.push($(this).attr('data-detail'));
								$('[data-detail="'+$(this).attr('data-detail')+'"]').addClass('is-indicated is-primary');
							}
						});
						_sc = '';
						_g = '';
						if($('#search-term').val().substring(0,3) == 111) {
							_t = $('#search-dept').val().replace('四技','').replace('系','').replace('行設專班','行設');
							_g = $('#search-class').val().substring(0,1);
							_t2 = _t.replace('化工','環資').replace('環安衛','環資').replace('材工','環資')
									.replace('工管','管設').replace('經管','管設').replace('行設','管設').replace('工設','管設').replace('視傳','管設')
									.replace('電子','電機').replace('化工','環資').replace('環安衛','環資').replace('材工','環資').replace('環實務','環資'); // 大一英文
							_t3 = _t.replace('經管','工管').replace('行設','工管').replace('視傳','工管').replace('工設','機械').replace('電子','電機')
									.replace('化工','環資').replace('環安衛','環資').replace('材工','環資').replace('環實務','環資'); // 大二英文聽講
							_t4 = _t.replace('化工','環資').replace('環安衛','環資').replace('材工','環資').replace('環實務','環資').replace('行設','電子'); // 大二英文實務
							_t5 = _t.replace('行設','電子').replace('材工','材料').replace('環安衛','環安')
							if(_g == 1) {
								savedCourse.push(schoolCourse['生活與職場英文_'+_t2]);
								_sc = '<br>及「生活與職場英文」';
								console.log('s'+schoolCourse['生活與職場英文_'+_t2])
							}
							if(_g == 2) {
								savedCourse.push(schoolCourse['英語聽講_'+_t3])
								savedCourse.push(schoolCourse[Object.keys(schoolCourse).filter(x => x.includes('英文實務2') && x.includes(_t4))]);
								_sc = '、<br>「英語聽講」及「英文實務」';
							}
							if(_g == 4) {
								savedCourse.push(schoolCourse[Object.keys(schoolCourse).filter(x => x.includes('英文實務4') && x.includes(_t5))]);
								_sc = '<br>及「英文實務」';
							}
							savedCourse = $.grep(savedCourse, n => n == 0 || n);
						}
						localStorage.setItem('savedCourse', JSON.stringify(savedCourse));
						if(savedCourse.length > 0) $('.savedCourse_count').text(savedCourse.length).show();
						else $('.savedCourse_count').hide();
						updateTimeList();
						Swal.fire({
							title: '儲存成功', icon: 'success', confirmButtonText: 'OK', confirmButtonColor: 'var(--ts-primary-600)',
							html: '已將「'+$('#search-dept').val()+$('#search-class').val()+'」的必修課'+_sc+'加入儲存的課程。'+( (_g==1 || _g==2) ? '<br><small>因無「'+['生活與職場英文','英語聽講'][_g-1]+'」分班資料，目前已為您儲存一堂相同時間的「'+['生活與職場英文','英語聽講'][_g-1]+'」，分班則以選課系統為準。</small>':'' )
						})
					}
				});
			})

			function updateTimeList() {
				savedCourseTime = [];
				$.each( savedCourse, function( k, t ) {
					$.each( courseData[t]['time'], function( k2, t2 ) {
						_t = t2[1].split('~');
						$.each([...ctimes].splice(ctimes.indexOf(_t[0]) , ctimes.indexOf(_t[1])-ctimes.indexOf(_t[0])+1 ) , function( k3, t3 ) {
							savedCourseTime.push(parseInt(t2[0]) +','+ t3)
						});
					});
				});
				// 檢查衝堂
				_test = new Date().getTime();
				$('#main tr').removeClass('is-negative is-indicated');
				$.each(courseData , function(k,t){
					$.each( t['time'], function( k2, t2 ) {
						_t = t2[1].split('~');
						$.each([...ctimes].splice(ctimes.indexOf(_t[0]) , ctimes.indexOf(_t[1])-ctimes.indexOf(_t[0])+1 ) , function( k3, t3 ) {
							if(savedCourseTime.includes(parseInt(t2[0]) +','+ t3)) {
								$('tr[data-detail="'+k+'"]').addClass('is-negative is-indicated');
								return false;
							}
						});
					});
				});
			}

			$('#search-term').on('change',function() {
				Swal.fire({
					title: '確定要更換為「'+$('#search-term').val()+'」學期嗎？',
					text: "先前儲存的課程將會清空！",
					icon: 'question',
					showCancelButton: true,
					confirmButtonColor: 'var(--ts-primary-600)',
					cancelButtonColor: 'var(--ts-gray-500)',
					confirmButtonText: '確定',
					cancelButtonText: '取消'
				}).then((result) => {
					if (result.isConfirmed) {
						localStorage.setItem('savedCourse', '[]');
						localStorage.setItem('term', $('#search-term').val());
						localStorage.setItem('filterOpen', 'true');
						location.reload();
					} else $('#search-term').val(Object.keys(courseData)[0].substring(0,3)+'-'+Object.keys(courseData)[0].substring(3,4));
				});
			});

			$('[data-show]').on('click',function(){
				$('[data-content]').hide();
				$('[data-content="'+$(this).attr('data-show')+'"]').show();
				$('[data-show]').removeClass('is-active');
				$(this).addClass('is-active');
			})

			$(document).keyup(function(e) {
				if(e.key === "Escape") {
					$('.ts-close').click();
				}
			});
		});
	</script>
</head>
<body>
	<div class="ts-app-layout is-full is-vertical">
		<div class="cell">
			<div class="ts-container">
				<div class="navbar">
					<div class="row">
						<div class="column">
							<div class="ts-tab is-center-aligned">
								<a href="" class="item is-active">
									<span class="ts-icon is-magnifying-glass-icon"></span>
									<div class="label">搜尋課程</div>
								</a>
								<a href="./saved" class="item">
									<span class="ts-icon is-star-icon"></span>
									<div class="label">儲存的課程 <span class="ts-badge is-small is-dense savedCourse_count" style="display:none"></span></div>
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell is-secondary is-fluid is-scrollable">
			<br>
			<div class="ts-container">
				<div class="ts-row is-middle-aligned" style="margin-block-end: 1.6em;">
					<div class="column is-fluid">
						<h1>搜尋課程</h1>
					</div>
					<div class="column">
						<button class="ts-button is-small is-outlined is-minimal-only toggle-search"><span class="ts-icon is-end-spaced is-filter-icon"></span> 篩選條件</button>
					</div>
				</div>
				<div class="ts-header is-icon loader"><span class="ts-icon is-spinning is-spinner-icon"></span>正在載入課表...</div>
				<div class="ts-segment is-secondary loading" id="search-box" style="margin-block-end: 1.6em;">
					<div class="ts-grid is-stackable">
						<div class="column is-2-wide">
							<label>學年/學期</label>
							<div class="ts-select is-fluid">
								<select id="search-term"></select>
							</div>
						</div>
						<div class="column is-3-wide">
							<label>開課單位</label>
							<div class="ts-select is-fluid">
								<select id="search-dept">
									<option selected="selected" value="">不限</option>
								</select>
							</div>
						</div>
						<div class="column is-2-wide">
							<label>開課班級</label>
							<div class="ts-select is-fluid">
								<select id="search-class">
									<option selected="selected" value="">不限</option>
								</select>
							</div>
						</div>
						<div class="column is-2-wide">
							<label>修別</label>
							<div class="ts-select is-fluid">
								<select id="search-type">
									<option value="" selected="selected">不限</option>
									<option>必修</option>
									<option>選修</option>
									<option>重修</option>
								</select>
							</div>
						</div>
						<div class="column is-4-wide">
							<label>課程名稱</label>
							<div class="ts-input is-fluid">
								<input type="text" id="search-course">
							</div>
						</div>
						<div class="column is-3-wide">
							<label>授課老師</label>
							<div class="ts-input is-fluid">
								<input type="text" id="search-teacher">
							</div>
						</div>
					</div>
					<div class="ts-row">
						<div class="column is-fluid">
							<button class="ts-button is-small save_require" style="margin-top:20px">儲存本班必修課</button>
						</div>
						<div class="column is-fluid is-minimal-only" style="text-align:right">
							<button class="ts-button is-small is-outlined toggle-search" style="margin-top:20px">完成</button>
						</div>
					</div>
				</div>
				<div class="ts-notice is-outlined loading">
					<div class="title">Tip!</div>
					<div class="content">
						您可以先<span class="is-minimal-only">在右上方的「篩選條件」</span>選擇自己的系所和班級，將必修課程儲存，再開始排課。<br>標記藍色為已儲存，紅色為衝堂。
					</div>
				</div>
				<br>
				<div class="ts-box loading">
					<table class="ts-table is-dense" id="main">
						<thead>
							<tr>
								<th>開課單位/班級</th>
								<th>課程名稱</th>
								<th>上課時間</th>
								<th>修別/學分</th>
								<th>授課老師</th>
								<th>備註</th>
							</tr>
						</thead>
						<tbody></tbody>
						<tfoot style="display: none;">
							<tr>
								<td class="is-center-aligned is-middle-aligned" colspan="6">
									<br><br>
									<div class="ts-header is-icon">
										<span class="ts-icon is-circle-exclamation-icon"></span>
										無符合條件的課程
									</div>
									<br><br>
								</td>
							</tr>
						</tfoot>
					</table>
				</div>
			</div>
			<br>
		</div>
		<div class="cell">
			<div style="text-align:center;font-size:80%;padding:5px">
				Powered by <a href="https://line.me/R/ti/p/%40ptq1966v" target="_blank">MCUT Bot</a> / <a href="https://henrywu.tw" target="_blank">Henry Wu</a>
			</div>
		</div>
	</div>
	<div class="ts-modal is-big">
		<div class="content">
			<div class="ts-content is-dense">
				<div class="ts-row">
					<div class="column is-fluid">
						<div class="ts-header"></div>
					</div>
					<div class="column">
						<button class="ts-close"></button>
					</div>
				</div>
			</div>
			<div class="ts-divider"></div>
			<div class="ts-tab is-fluid" id="switch-detail">
				<a class="item is-active" data-show="detail-content">課程資訊</a>
				<a class="item" data-show="course-comment">課程評價</a>
			</div>
			<div class="ts-content detail-content" data-content="detail-content" style="height:75vh;overflow-y:scroll;"></div>
			<div class="" data-content="course-comment" style="height:75vh;overflow:hidden;display:none">
				<iframe id="score" style="width:100%;height:100%;border:none"></iframe>
			</div>
		</div>
	</div>
</body>
</html>
