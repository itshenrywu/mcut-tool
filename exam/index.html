<!DOCTYPE html>
<html>
<head>
	<title>明志科大英文段考考場、考試時間</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1.0, user-scalable=0">
	<meta property="og:description" content="Powered by MCUT Bot / Henry Wu">
	<meta property="og:image" content="https://mcut.henrywu.tw/res/logo.png">
	<link rel="icon" type="image/png" href="../res/logo.png">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocas/4.2.4/tocas.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.3/swiper-bundle.min.css" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.3/swiper-bundle.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<style>
		.cell.is-fluid {
			overflow: hidden;
		}

		.swiper-slide {
			height: 100vh;
			height: 100dvh;
			overflow-y: scroll;
			padding-bottom: 225px;
		}

		.swiper-scrollbar.swiper-scrollbar-horizontal {
			background: transparent;
			width: 100%;
			left: 0;
			bottom: auto;
			margin-top: -3px;
		}

		.swiper-scrollbar-drag {
			background: var(--ts-gray-900);
			border-radius: 0;
		}

		.ts-box {
			border-right: none;
			border-left: none;
		}

		.footer {
			padding: 5px 0;
			text-align: center;
		}
	</style>
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-DZHZ6VYR7M"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'G-DZHZ6VYR7M');
	</script>
</head>
<body>
	<div class="ts-app-layout is-full is-vertical">
		<div class="cell is-secondary">
			<div class="ts-container is-very-narrow is-fitted">
				<div class="ts-tab is-fluid">
					<a class="item" data-view="0">大一生活與職場英文</a>
					<a class="item" data-view="1">大二英語聽講</a>
				</div>
				<div class="swiper-scrollbar"></div>
			</div>
		</div>
		<div class="cell">
			<div class="ts-segment is-secondary is-center-aligned" style="border:none;">
				<div class="ts-container is-very-narrow">
					<div class="ts-header is-center-aligned" id="date"></div>
					<div class="ts-space is-small"></div>
					<div class="ts-selection is-dense is-small">
						<label class="item">
							<input type="radio" name="dept" value="管設" /><div class="text">管設</div>
						</label>
						<label class="item">
							<input type="radio" name="dept" value="環資" /><div class="text">環資</div>
						</label>
						<label class="item">
							<input type="radio" name="dept" value="電機電子" /><div class="text">電機電子</div>
						</label>
						<label class="item">
							<input type="radio" name="dept" value="機械" /><div class="text">機械 AI</div>
						</label>
					</div>
					<div class="ts-space is-small"></div>
					<div class="ts-selection is-dense is-small">
						<label class="item"><input type="radio" name="level" value="初" /><div class="text">初級</div>
						</label>
						<label class="item"><input type="radio" name="level" value="中" /><div class="text">中級</div>
						</label>
						<label class="item"><input type="radio" name="level" value="高" /><div class="text">高級</div>
						</label>
						<label class="item"><input type="radio" name="level" value="菁英" /><div class="text">菁英</div>
						</label>
					</div>
				</div>
			</div>
		</div>
		<div class="cell is-fluid">			
			<div class="swiper">
				<div class="swiper-wrapper">
					<div class="swiper-slide" data-list="生活與職場英文"></div>
					<div class="swiper-slide" data-list="英語聽講"></div>
				</div>
			</div>
		</div>
		<div class="cell footer">
			Powered by <a href="https://line.me/R/ti/p/%40ptq1966v" target="_blank">MCUT Bot</a> / <a href="https://henrywu.tw" target="_blank">Henry Wu</a> | <a href="https://line.me/R/ti/p/%40221oslxd" target="_blank">問題回報</a>
		</div>
	</div>
	<script>
		$(function(){
			var swiper = new Swiper('.swiper', {
				scrollbar: {el: '.swiper-scrollbar'}
			});

			function sortById(a, b) {
				return ($(a).attr('data-sort') > $(b).attr('data-sort')) ? 1 : -1;
			}

			function getSortId(text) {
				return text.replace(' ','').replace('管設',1).replace('環資',2).replace('電機電子AI',3).replace('機械',4).replace('初',1).replace('中',2).replace('高',3).replace('菁英',4).replace('A',1).replace('B',2).replace('C',3).replace('D',4).replace('E',5).replace('F',6);
			}

			$.ajax({
				url: 'data.json?v=20241030',
				dataType: 'json',
				success: function(res) {
					processData(res);
				}
			});

			function processData(res) {
				$('#date').html('<span class="ts-icon is-calendar-days-icon is-end-spaced"></span>' + res[0][3] + ' (二) ');
				$.each(res, function(i, v) {
					$('[data-list="'+v[1]+'"]').append('<div class="ts-box is-squared" data-sort="'+getSortId(v[0])+'" data-name="'+v[0]+'"><div class="ts-container is-very-narrow is-fitted"><div class="ts-content"><div class="ts-header">'+v[0].replace(/([\x00-\xFF]+)/g, " $1 ")+'</div><p>\
						<span class="ts-icon is-user-icon is-end-spaced"></span>'+v[2]+'　\
						<span class="ts-icon is-clock-icon is-end-spaced"></span>'+v[4]+'　\
						<span class="ts-icon is-location-dot-icon is-end-spaced"></span>'+v[5]+'\
						</p></div></div></div>');
				});
				$('[data-list="生活與職場英文"] .ts-box').sort(sortById).appendTo('[data-list="生活與職場英文"]');
				$('[data-list="英語聽講"] .ts-box').sort(sortById).appendTo('[data-list="英語聽講"]');
			}

			$('input[type="radio"]').on('click',function(){
				if($(this).hasClass('clicked')) {
					$(this).removeClass('clicked').prop('checked', false);
					$('.ts-box').hide();
					$('.ts-box').each(function(i,e){
						if(
							$(this).attr('data-name').includes($('[name="dept"]:checked').val() || '') &&
							$(this).attr('data-name').includes($('[name="level"]:checked').val() || '')
						) {
							$(e).show();
						}
					});
					$('.swiper-slide').animate({scrollTop: 0}, 500);
				}
			})

			$('input[type="radio"]').on('change',function(){
				$(this).parent().parent().find('input').removeClass('clicked');
				$(this).addClass('clicked');
				$('.ts-box').hide();
				$('.ts-box').each(function(i,e){
					if(
						$(this).attr('data-name').includes($('[name="dept"]:checked').val() || '') &&
						$(this).attr('data-name').includes($('[name="level"]:checked').val() || '')
					) {
						$(e).show();
					}
				});
				$('.swiper-slide').animate({scrollTop: 0}, 500);
			});

			$('.ts-tab .item').on('click',function(){
				$('.swiper-slide').animate({scrollTop: 0}, 500);
				swiper.slideTo(parseInt($(this).attr('data-view')));
			});

			swiper.on('slideChange', function () {
				if(swiper.activeIndex == 0) {
					$('input[name="dept"][value="電機電子"] + .text').text('電機電子');
					$('input[name="dept"][value="機械"] + .text').text('機械 AI');
				} else {
					$('input[name="dept"][value="電機電子"] + .text').text('電機電子 AI');
					$('input[name="dept"][value="機械"] + .text').text('機械');
				}
			});
		});
	</script>
</body>
</html>
